---

version: "2.4"
services:

  storage01:
    image: ${NODE_IMAGE}:${NODE_VERSION}
    container_name: s01.localtest.nspcc.ru
    networks:
      storage_int:
      internet:
        ipv4_address: ${IPV4_PREFIX}.71
    stop_signal: SIGKILL
    volumes: [ "./01.key:/01.key" ]
    env_file: [ ".env", ".storage.env" ]
    environment:
    - NEOFS_NODE_KEY=/01.key
    - NEOFS_NODE_ADDRESS=s01.localtest.nspcc.ru:8080
    - NEOFS_GRPC_ENDPOINT=s01.localtest.nspcc.ru:8080

  storage02:
    image: ${NODE_IMAGE}:${NODE_VERSION}
    container_name: s02.localtest.nspcc.ru
    networks:
      storage_int:
      internet:
        ipv4_address: ${IPV4_PREFIX}.72
    stop_signal: SIGKILL
    volumes: [ "./02.key:/02.key" ]
    env_file: [ ".env", ".storage.env" ]
    environment:
    - NEOFS_NODE_KEY=/02.key
    - NEOFS_NODE_ADDRESS=s02.localtest.nspcc.ru:8080
    - NEOFS_GRPC_ENDPOINT=s02.localtest.nspcc.ru:8080

  storage03:
    image: ${NODE_IMAGE}:${NODE_VERSION}
    container_name: s03.localtest.nspcc.ru
    networks:
      storage_int:
      internet:
        ipv4_address: ${IPV4_PREFIX}.73
    stop_signal: SIGKILL
    volumes: [ "./03.key:/03.key" ]
    env_file: [ ".env", ".storage.env" ]
    environment:
    - NEOFS_NODE_KEY=/03.key
    - NEOFS_NODE_ADDRESS=s03.localtest.nspcc.ru:8080
    - NEOFS_GRPC_ENDPOINT=s03.localtest.nspcc.ru:8080

  storage04:
    image: ${NODE_IMAGE}:${NODE_VERSION}
    container_name: s04.localtest.nspcc.ru
    networks:
      storage_int:
      internet:
        ipv4_address: ${IPV4_PREFIX}.74
    stop_signal: SIGKILL
    volumes: [ "./04.key:/04.key" ]
    env_file: [ ".env", ".storage.env" ]
    environment:
      - NEOFS_NODE_KEY=/04.key
      - NEOFS_NODE_ADDRESS=s04.localtest.nspcc.ru:8080
      - NEOFS_GRPC_ENDPOINT=s04.localtest.nspcc.ru:8080

networks:
  storage_int:
  internet:
    external:
      name: basenet_internet
